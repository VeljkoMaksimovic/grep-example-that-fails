version: v1.0
name: Semaphore Go CI example
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: Build project
    task:
      jobs:
        - commands:
            - echo $TESTS_TO_RUN
            - go version
            - checkout
            - go run main.go
          env_vars:
            - name: TESTS_TO_RUN
              value: TestPrivateLinkAzureE2E
            - name: CLOUD
              value: azure
            - name: REGION
              value: centralus
          name: 'Azure Setup, Azure test, Azure release'
        - commands:
            - echo $TESTS_TO_RUN
            - go version
            - checkout
            - go run main.go
          env_vars:
            - name: TESTS_TO_RUN
              value: TestPrivateLinkAwsE2E/TestPrivateAwsClientWorkflow
          name: 'Aws Setup, Aws test, Aws release'
